Numbers (#) refer to GitHub issues in project `littlenavmap`.
For example: #3 is https://github.com/albar965/littlenavmap/issues/3.
This text is partially Markdown, so the formatting is sometimes strange.

===============================================================================

# Version 4.0.17

* Fixed issue where all VORTAC were loaded as TACAN in MSFS 2020 resulting in wrong bearings and
  wrong type display.
* Now omitting channel for VOR, VORDME and DME for all MSFS simulators. Channel applies only to
  VORTAC and TACAN.
* Fixed issue with double runways when using Navigraph navdata update in MSFS 2020. Example: Add-on
  for FHSH (no stock airport available) `kychungdotcom-airport-fhsh-sthelena` showed duplicate
  runways.
* Clean up error handling for scenery library loader to allow loading to continue after an error.
* Fixed issue where a broken CSV import resulted in errors for further imports for userpoints or
  logbook.
* More filtering to get rid of wrong MSFS aircraft indications before starting a flight in the
  simulator. These resulted in an aircraft trail crossing all over the world causing display issues
  and crashes.

===============================================================================

# Version 4.0.16

* Updated all translations.
* Added option to add missing navaids to MSFS 2024. Reading file navaids_msfs2024_extra.csv
  from resources and settings folder if present.
* Improved error handling in SimConnect loader.
* The distance for the inclusion of airports in the METAR interpolation has been increased
  from 200 to 600 NM.

===============================================================================

# Version 4.0.15.rc1

* Changed fetching of user and AI from SimConnect. Now stopping call dispatch after enough AI was
  fetched by number. More logging if verbose Dropped usage of unique objectID and using list now.
* Now setting simulator flags for MSFS sims in user aircraft.
* Removed aircraft filter.
* Attemped fix for wrong AI vehicle categories. Now using filter for all simulators and logging new
  categories found.
* Updated Brazilian Portuguese translation by Ricardo.

===============================================================================

# Version 4.0.14

## Changes from 4.0.14.beta2 to 4.0.14

* Changed to stable version 4.0.14 to have version number in sync with Little Navmap.
* Now applying filter for MSFS 2024 ground vehicles only for this simulator to avoid issues where
  ship traffic is delivered with the wrong category in other simulators.
* Adapted detection of Navigraph update to new folder names and made it more tolerant. #1198
* Fixed issue with missing airways in MSFS 2024. #1198
* Fixed issues where airways were not built correctly reading X-Plane data.
  Examples which did not read:
  `ZBAA IDKEX B339 ASILA A575 INTIK Y655 AROGU A575 KD A308 ML A300 RUBOR T448 SOPUS USSS`,
  `ZUCK PINAB W80 WFX W179 OMBON B330 GOBIN W66 NUKTI B215 HAM W99 AGOXA ZWWW` and
  `ZUCK UNRIX W180 BONSA W91 IDSID W30 MEBNA ZPPP` #1219
* Fixed issue when building airways from X-Plane navdata. Example: The wrong NDB BM/UH far
  away was selected to build the airway A800. #1237
* Updated Brazilian Portuguese translation by Ricardo.
* Updated Italian translation by Flavio.
* Updated French translation by Patrick.

===============================================================================

# Version 4.0.14.beta2

## MSFS 2024 Scenery Library #1198

* Fixed invalid runway references in ILS. As result ILS or localizers used in the flight plan were
  not shown in the elevation profile or the map.
* Now combining procedures having the same runway transitions. Runway transitions are now collapsed
  to parallel runways (e.g. 16L, 16R) or `All`.
* Now adding navaids not connected to procedures or airways to MSFS 2024 loading process. These are
  required to build Oceanic tracks or off-airways routes, for example.
* Now correcting odd altitude values by rounding. This affected procedure altitude restrictions,
  for example.
* Corrected counting of ILS when loading scenery library.
* Fixed ILS detection. Previously some or all ILS were wrongly read as VOR stations.
* Now calculating magnetic declination for all facilies except VOR using the World Magnetic Model
  instead of the partially wrong MSFS 2024 values.
* Fixed detection of military airports. Added new keywords for military names in other languages.

## Other

* Updated German translation.

===============================================================================

# Version 4.0.14.beta1

## MSFS 2024 Scenery Library #1198

* Added loading of navaids to MSFS 2024 compiler. Fetching all navaids based on airport procedure
  references Then starting with these traverse the airway/route network.
* Adapted SimConnect interface and dummy interface to new MSFS 2024 functions.
* Now setting all VOR and NDB waypoints to artificial in FSX, P3D and MSFS simulators to hide them
  in the user interface.
* Now omitting duplicate waypoints with invalid regions in MSFS simulators. Also using better
  duplicate waypoint removal for MSFS 2020 now.
* Adapted build file to use both MSFS 2020 and 2024 SDK. Replaced ATOOLS_SIMCONNECT_PATH_WIN64 with
  new ATOOLS_SIMCONNECT_PATH_WIN64_MSFS_2020 and ATOOLS_SIMCONNECT_PATH_WIN64_MSFS_2024 for 64-bit
  build.
* Added reading or airports, their facilities and procedures from MSFS 2024 SimConnect. This
  fetches airports, runways, starts, parking taxiways and all procedures via SimConnect and writes
  them to the database.
* Added script to delete waypoint duplicates for MSFS 2024.
* Added methods to clear invalid and not translatable aircraft properties. For MSFS 2024
* Adapted main database compilation to MSFS 2024.
* Added detection of MSFS 2024 installation.
* Moved activation context out of the SimConnectHandler for more flexibility.
* Add option for DLL name when binding functions of SimConnect.

## MSFS 2024 Flight Plan #1216

* Added detection, reading and writing of MSFS 2024 flight plans.

## Other

* Updated to World Magnetic Model 2025 for more accurate declination calculation.
* Disabled unused number of strobes for approach lights in table. Removed obsolete and unused
  num_strobes field in runway_end.
* Removed AUSOTS track system since it is discontinued. Now uses preferred routes.
* ILS feather geometry is now using a minimum width of 2 degrees to avoid invisible ILS feathers in
  all simulators.
* Fixed issues in rectangle normalization. This resulted in disappearing large distance rings. #1207
* Fix for on-ground approximation to avoid wrong takeoff detection when hovering with helicopters.
* Fixed version string patterns to avoid unwanted translation.
* Updated translation files and add Chinese back again.

===============================================================================

# Version 4.0.13

* Better error reporting and validation in log file for invalid taxiway structures in MSFS.
  #1200
* Work on BGL compiler. Removed compiler filters TAXIWAY_RUNWAY and VEHICLE which are now omitted
  by default.
* Fixed issue where ILS were missing for MSFS. Examples EGPH using ILS approach with an add-on
  airport and EDDF double ILS approach like 25R.
* Fixed broken airway collection for X-Plane. Example: Airway W66 not found for
  `ZUCK ATBUG W66 JNQ  ZWWW`. #1197
* Airport exclude configuration did not work for X-Plane 12 in navdatacompiler.
* Fixed issue where last airway in scenery library was missed adding to the database. This affected
  all simulators except the DFD compiler.
* Fixed issues with incorrect rectangle bounds when creating from position and radius.
* Fixed missing circles for online towers and centers not having a matching geometry
  in the user database.
* Fixed several issues in X-Plane database when assigning airports to procedures.
  Examples: VNPR or AT4 where procedures could not be found.
* Whazzup reader now uses default center radius if not available.

===============================================================================

# Version 4.0.12

Release for *Little Navmap*.

* From 3.0.10.rc1 to 3.0.11: Translations for French, Italian and Brazilian Portuguese updated.
* Fixed issues with application shutdown. Method aboutToQuit() was not called on OS shutdown.
  Replaced with signal commitDataRequest(). Now logging in method applicationAboutToQuitInternal().
* DataExchange now always set exit flag to terminate application for command line options
  `-q` / `--quit` even if no other instance was found.

===============================================================================

# Version 4.0.11

This is a release specific to the Navdatareader project.

* Fixed issue where detection of malformed MSFS airports rejected valid airport add-ons with a
  message `Duplicate airport ident`. This happened when add-on developers put more than one of the
  same airport into one BGL file.
* Better detection of the longest runway for airports. Now ignoring water runways if airport has
  water and land runways.
* Fixed wrong airport bounding rectangle calculation for X-Plane airports. Example: KSEA in
  X-Plane 12. This resulted in a too far zoom out when double clicking the airport.
* Better airspace geometry for Navigraph databases and all airspaces read from simulator
  libraries. Now considering Rhumb line segments in Navigraph airspace description. Note that a
  workaround is used to detect these segments for simulator and user airspaces since required
  information is missing in simulators. This eliminates wrong airspace boundaries drawn as
  bows (Great Circle lines).
* Improved display of airspace that touch the poles.
* Fixed duplicate reading of X-Plane `airspace.txt`. The file `airspace.txt` in `Custom Data` now
  overrides the one in `Resources`.
* Added waypoint names to X-Plane and DFD compilers. #1176
* Now doing better capitalization function for waypoint names. #1176
* Added missing columns `name`, `artificial` and `arinc_type` to table trackpoint which could
  result in incomplete waypoint type display.
* Fixed issue with bounding rectangle calculation which resulted in wrong results when searching by
  `Distance from Mark` and other functions around the antimeridian. #1184
* Increased number samples when calculating elevation from GLOBE data to avoid missing peaks when
  drawing the elevation profile.
* Fixed issue where RealityXP GNS export declared destination airport wrongly as userpoint when
  using export option with userpoints.
* Now using ISO date with offset from UTC in all flight plan files.
* Now getting best guess for user aircraft type designator and category in MFSF. Using keys
  `icao_type_designator` and `icao_model` from file `aircraft.cfg`. Added aircraft category to detect
  helicopters.
* Cleanup in navdatabase compiler. Tables `airport_medium`, `airport_large`, `route_node_radio`,
  `route_edge_radio`, `route_node_airway` and `route_edge_airway` now removed. This breaks
  compatibility with versions before 2020 of *Little Navmap*. The program will show an SQL exception
  if this is the case. Users have to update *Little Navmap* if they run into this.
* View creation in database now disabled.
* Updated minor database version to 29 due to several schema changes. This results in a notice
  about a previous database version although reloading is not required. #1176
* Fixed issue with double and invalid COM frequencies for MSFS airports when using MSFS Navigraph update.
* Fixed issues reading MSA centers for X-Plane where runways were not detected. Now also looking
  for center points of ILS.
* Made GPX file detection more tolerant.
* Fixed issues on OS shutdown where crash was detected wrongly.
* DataExchange now always set exit flag to terminate application even if no other instance was found.
* Translations for French, Italian and Brazilian Portuguese updated. Thanks to Flavio, Patrick and Ricardo!

===============================================================================

# Version 4.0.9

* Added crash handler to catch signals/exceptions. Requires
  [cpptrace](https://github.com/jeremy-rifkin/cpptrace) in the build path if enabled. Disable by
  setting the environment variable ATOOLS_NO_CRASHHANDLER=true. Not available on macOS and
  Windows 32-bit. Needs debug information in the executable to print meaningful stacktraces.
* Moved DataExchange from littlenavmap to atools.
* Removed Dutch, Chinese and Spanish compiled translation files from project. These have not been
  updated for a long time which can cause problems in the user user interface.
* Fixed issue where NOAA and X-Plane 12 weather stations were not updated and showed
  outdated weather.
* Added timer to measure application startup.

===============================================================================

# Version 4.0.8

* Added inFont to check Unicode character availability.
* Updated translations for Brazilian Portuguese, French, German and Italian.
* Removed Dutch, Chinese and Spanish translations since these have not been updated for a long time
  which can cause problems in the user user interface.
* Fixed issue where helipad only or other airports had no bounding rectangle in MSFS.

===============================================================================

# Version 4.0.7.rc1

* Completely reworked SQL error reporting. Now optionally opening SQLite database readonly.
* Fixed issues where coordinates received the wrong sign near Meridian line.
* Added radio buttons to ChoiceDialog. #1013
* Added methods to clear dialog positions in WidgetState.
* Function to center a widget on the main screen. Now also centering main window in
  DockWidgetHandler::resetWindowState.
* Log data manager cleanup method improved. Extended to cleanup off-airport coordinates like
  2956N10702E 4831N12255W in addition to empty idents.
* More checks for index out of bounds to avoid crashes.
* Now bailing out early when reading malformed BGL files. Example broken UWLS.bgl
* Fix for crash when reading BGL files having invalid airports.
* Made loading of MSFS PLN flight plan files more tolerant for missing altitude
* Fixes and optimizations for boundary calculations in geo #1126
* Fixed crash in metar index and spatial index.
* Now blocking METAR access while reading files to avoid crashes due to invalid index.
* Made reading of METAR strings more robust for invalid characters
* Fixed weather and METARs for FSX/P3D. Enabled interpolated weather. Fixed wrong time zone for
  METAR reports.
* Complete rework of METAR classes and index. Added interpolation for nearest METARs. Changed METAR
index to calculate and cache interpolated METARs. More optimizations.
* Removed too many log messages from weather loading.
* Fixed issue where interpolated wind showed up as invalid in METAR.
* Changed weather symbols like `SCT` to be untranslateable.
* Fix in widget state for invalid position if key not valid.
* Now keeping roman numbers upper case in names for airspaces and airport names.
* Better capitalization of words for navaid and airport names.
* Fixed COM duplicates in MSFS scenery library with Navigraph navdata update installed.
* Updated German translation.

===============================================================================

# Version 4.0.6

* Removed annotated PLN export and added option for star or degree sign.
* Added new X-Plane 12 VASI types APAPI_L and APAPI_R.
* Fixed issue where X-Plane airways had wrong type. Example:
  EVMON to PAPAL airway Z8 wrongly declared Jet. #1111
* Added clearSelection to updateTextEdit.
* Added methods to save and restore collected aircraft performance.
* Closing splash screen in error handler now.
* saveState to const converted.
* Added option for backup files when getting log files from LoggingUtil.
  Now only adding existing files
* Changed header methods in HtmlBuilder.
* Fixed runwayFlags method to consider empty input.
* Optimizations in DataManagerBase. Converted parameters to const references.
* Normalized logging for message boxes
* Removed redundant closeSplashScreen calls.
* Moved splash screen handling to Application.
  Now also closing splash in all dialog windows.
* Correctly assigning now `ALL` to `approach.arinc_name`  for SID/STAR having no
  runway assignments.
* Corrected VOR range for X-Plane data to use 130 NM for
  "unspecified but likely high power VOR".

===============================================================================

# Version 4.0.5

* Hotfix to avoid error message `Caught exception: Invalid lat/long format`
  when loading the new MSFS PLN files with `*` as degree sign as it is used
  since 3.0.4.
* Fixed centering of table data in HtmlBuilder.

===============================================================================

# Version 4.0.4

* Fixed wong usage of QSettings in httpserver and replaced it with a hash map to avoid
  unwanted creation of registry entries due to QSettings abuse.
* Changed configuration options in HTTP server.
* Application folder is now used as base if docroot is relative for HTTP server.
* Removed ICAOAirport from Simavionics PLN export.
* Fixed aircraft index which loads aircraft ICAO codes from MSFS aircraft files for the user aircraft.
* Updated database version to 28.
* Replaced `°` in MSFS flight plan export with `*` to avoid issues on computers with Asian locale.
* Now omitting IPv6 link local addresses in navserver.
* Reworked settings to allow initialization before application object. Added delayed logging.

===============================================================================

# Version 4.0.3.rc1

* Fixed aircraft index flooding log with messages when loading MSFS aircraft files. Now avoiding
  re-reading if files are not available.
* Now writing ICAOIdent field for userpoints in FSX/P3D flight plan export to fix userpoint display
  in GPS.
* Now ignoring empty GRIB files from the X-Plane weather folder.

===============================================================================

# Version 4.0.2.beta

* Runways marked as closed are now shown as such in DFD compiler.
* Airport patterns now correctly marked as not available for DFD.
* Runways having one end closed are now positioned correctly. Example: EDDF runway 18.
* Fixed issue where simple wait dialog did not update contents.
* Fix for PLN in MSFS where transitions were not loaded by MSFS due to missing waypoint. Example:
  EDDV, using STAR NIE27 via NIE and ILS-Y INSAG (I27RY) or
  using STAR NIE27 via SAS and ILS-Z XAVER  (I27RZ).
* Better transition detection now when loading MSFS PLN files. Using last STAR waypoint or last
  en-route waypoint to find a matching approach transition.
* Added SignalHandler to safely catch SIGHUP, SIGTERM or SIGINT on Linux. This avoids data loss due
  to unsaved files when terminating with Ctrl+C.
* Changed application to catch program stopping during Windows shutdown which resulted in wrong
  crash reports. Now shutting program cleanly down when shutting down Windows with Little Navmap
  running.
* Added more upper case exceptions for airspaces.
* Added file operations for recursive copying and deleting folders.
* Now logging pointer value when deleting objects.
* Fixed deadlock in HTTP server which appeared when shutting down with parallel incoming requests.
* Updated HTTP server by  Stefan Frings to latest version from 1.9.0
* Corrected excessive logging in HTTP server.
* Fixed wrong calculation for airport rating which did not update add-on airports.
* Deleting duplicate navaids now by region, ident and position now.
* Fixed issue where widget state could not find saved dialog state.
* Wrongly built airports like the MS MKJS now keep their procedure information in MSFS despite
  trying to override it with an empty procedure set. #1085

===============================================================================

# Version 4.0.1.beta

* Fixes for potential crashes when accessing empty lists.
* Updated all message dialogs to make text in dialog boxes selectable.
* All message box messages are now logged.
* Now logging record exit.
* Fixed too large font in tables on macOS
* Fix for excessive warnings in HTTP server.
* Updated German translation.
* Updated Italian translation by Flavio Borgna.

===============================================================================

# Version 4.0.0.beta

* Added LogdataManager::repairDateTime. Fixes local time in logbook without timezone.
* Added SimConnectAircraft property PROP_XPCONNECT_VERSION to track Xpconnect version.
* GUI tool updated. showInFileManager and HelpHandler::openFile can now deal with
  file:// URLs Updated crash report to  open folder containing report files from dialog.
  Added linkActivated to MessageBox.
* Changed ItemViewZoomHandler to use application font as a base for size
* Better cleanup functions that can deal with empty or null columns in databases.
* Fixed issue where widgetutils did not recurse into nested layouts. Added option to
  showHideLayoutElements to disable widgets.
* Function changeIndication now using text instead of star.
* Refactoring and renaming around flight plan properties. Fixed issue where not all STAR properties
  were copied.
* Added definitions for user approach and departure.
* Added ListWidgetIndex for searching in options dialogs. Added stop-word list with all relevant
  languages.
* Added ATOOLS_DELETE macro for logging and reset of pointers.
* Now setting "is_draw_surface" always to 1 for X-Plane to avoid transparent aprons.
  #1059
* Adde min and max altitude to GpxData class. #97
* Added message box which stays open when clicking help button for crash handler, for example.
* Added zlib to atools to create Zip files.
* Added functionality to automatically generate a crash report on startup.
* Optional full debug output on read airports when reading BGL.
* Added polygon tools as an aid to label airspace polygons.
* Fixed Pos::intersectingRadials to return invalid point in case of NaN.
* Added military base acronyms to capNavString for airspaces.
* Added polygon tools as an aid to label airspace polygons.
* Fixed issue in DFD compiler where circular airspace arcs resulted in self crossing polygons.
* Doubled number or arc and circle segments for more accuracy in map display airspaces.
* elidedTexts to QFontMetricsF for more text placement accuracy.
* LineString getStartCourse and getEndCourse added.
* Fixed wrong altitude in route section for GPX export. #1053
* Added cleanup preview functions to LogdataManager and UserdataManager.
* Optimizations in flight plan export.
* Made selection color of inactive table elements the same as active on Windows.
* Fixed issues with moved or updated airports in MSFS when reading scenery library.
* Added semicolon to invalid characters in filename.
* Fixed crash for second userpoint or logbook import.
* Now excluding all navaids in detected Navigraph update when reading scenery library of MSFS.
* Database name and file in SQL exception now.
* Reduced logging in HTTP server.
* Additional scenery folder is now read recursively for all simulators
* Added methods cleanPath and nativeCleanPath to avoid breaking UNC paths.
* Now prefixing one digit runway numbers with zero on X-Plane FMS export to avoid issues when
  loading into GPS.
* Fixed detection of loopback device.
* Adjusted listening hostname list report.
* Added support for IPv6 in navserver and web server.

===============================================================================

# Version 3.8.17

* Code cleanup and optimizations in BGL reading code.
* Fixed obscure crash when rotating log file on size overflow.
  Corrected file roller to remove original file when using default backup pattern.
* Added file checker and reduced logging in filesystem watcher.

===============================================================================

# Version 3.8.16

* Added support for Prepar3D v6. Note that this is untested. Let me know if you find any issues.
* Fix in flight plan export for MSFS where waypoints are moved to North. #1038
* Fixed issues where no error was shown when importing invalid userpoint or logbook CSV files.
* Fixed issue where an aborted CSV import might corrupt the undo data.
* Update CSV import and export for userpoints to allow unit suffixes in altitude. Now detecting
  suffixes `m` for meter and `f` for feet to import altitude in respective units. Feet is still
  default without suffix.

===============================================================================

# Version 3.8.15

* Added option and properties to determine SID/STAR transitions by last or first waypoint when
  loading flight plan.
* Added reading of aircraft type designator from MSFS aircraft configuration files.
* Added aircraft index to fetch additional values from MSFS aircraft.cfg files.
* Added properties to SimConnectAircraft: More accurate position and aircraft.cfg file for MSFS.
* Work on binary Props and DPos. Explicit for Props constructors and fixed warnings. Improved class DPos.
* Now allowing comma separated coordinate pairs for decimal coordinate formats.
* Added aircraft loaded event to SimConnectHandler
* Added helicopter to SimConnectAircraft::isFlying and SimConnectData::buildDebugForPosition
* More cleanup for MSFS airport names. Now removing space at end and beginning of all names.
* Fixed no signal on current index sent when restoring editable combo boxes.
* Fixed issue where MSFS navdata update was recognized despite excluded folders
* Fixes in userpoint and logdata import and export.
* Added methods to cleanup userpoint database.
* Userpoint CSV import is now one transaction (undo) for all selected files.
* Fixed country names appearing as language keys when compiling MSFS.
* Now optionally disabling ok button in choice dialog if required checkboxes are not set.
* Changed ids from list to set in DataManagerBase.
* Added option to read extra scenery library folder. #959
* Fixed crash in dialog class if checkbox is not set. Now allowing empty settingsKey for all methods.
* Now adding start positions for runways in DFD compiler to allow departure parking selection.
* Corrected detection and reading of Navigraph navdata update in MSFS.
  Now reading airport add-ons from update. Navdata and procedures are ignored. Wrongly excluded
  package is now read. Speed up for reading scenery library by ignoring unused procedures from
  navdata update. #1019
* X-Plane 12 manually corrected localizers are now read.
* Fix for missing aircraft model translations since MSFS SU12.
* Corrected overzealous filter for MSFS airport dummy structures which removed add-on helipads or
  airports. Example add-on: `willicopta-spital-la-chaux-de-fonds-lsh9` which did not show up.
* Fixed issue with excessive fight plan altitude on loading for formats which do not support this.
* Now attempting to load SID and STAR from FSC PLN files.
* Now omitting flight plan type (IFR/VFR) for flight plan formats not supporting this.
* Added workaround for broken X-Plane FMS flight plans without valid altitude information.
* Added new optional CruisingAltF element to LNMPLN file format to avoid rounding errors when using
  metric units. Update LNMPLN file version to 1.2 for change.
* Changed internal representation of cruise altitude to floating point to avoid rounding errors.

===============================================================================

# Version 3.8.14

* More parameters in buildDebugForPosition
* Now populating ils.loc_width in DFD compiler #1011
* Added option for extra buttons in tab handler.
* Added density and pressure altitude calculation
* Adjusted airport rating calculation for MSFS. Now setting airports having only apron snippets to
  zero rating equal to empty #1010
* Airport name adjustements
* Added workaround for missing translations in MSFS for AI or multiplayer aircraft.
* Added option to disable obsolete airport_large and airport_medium tables.

===============================================================================

# Version 3.8.13

* Better check for flight plan file pattern.
* Changed reading of MSFS scenery library. Now also reading content type `AIRCRAFT` since
  aircraft add-ons may contain airports as well.
* Adjusted detection of Navigraph package.
* Fixed crash when loading X-Plane FMS files with negative airport elevation.
* Adapted to new wind aloft file pattern in X-Plane which was introduced with version 12.04b2.
* Increased maximum length for user waypoints to 80 characters in MSFS PLN flight plan file export.
* Fix for stacked dock windows appearing in the wrong order or toggling visibility after un-minimizing main window.
* Corrected loading of routing network which was incomplete due to new MSFS RNAV waypoint type. #1001
* Increased max entries in map position history.
* Made reading of GRIB files more error tolerant. Now throwing exception for empty, null-sized or wrong files.
* Removed needless dock window repositioning to avoid issues with docks moved to the wrong screen.

===============================================================================

# Version 3.8.12

* Corrected logbook and userpoint import functions where first row in CSV files was not recognized
  with quoted names.
* Added export for X-Plane CIVA Navigation System which writes the flight plan into partitioned
  files.
* Fixed several issues with new X-Plane runway surface types. Fixed dropped runways if they used
  unknown surface types for X-Plane airports. This resulted in airports registered without runways
  and having helipad symbol assigned. Implemented new undocumented asphalt and concrete textures
  found in WED 2.5.
* Reverted workaround for MSFS unreliable on-ground indication for user aircraft.
* Fixed issue with mapped drives on Windows where add-on airports were not detected when having
  MSFS installed on a mapped drive.
* Made loading of X-Plane FMS plans more tolerant for invalid files. Now throwing error messages in
  case of invalid coordinates to avoid crash.
* WindQuery more tolerant for invalid coordinates.
* Fixed wrong date and timezone calculation which resulted in wrong endurance and
  turn anticipation display in Little Navmap.
* Corrected NAT track download address to notams.aim.faa.gov/nat.html to avoid error messages on
  download.
* Fixes to avoid crash with duplicate ids when adding userpoints or logbook entries. #985
* Updated program translation for Brazilian Portuguese by Ricardo.

===============================================================================

# Version 3.8.11

* Corrected layer ordering for MSFS scenery library to adhere to priorities in file `Content.xml`.

===============================================================================

# Version 3.8.10.rc2

* Added isDownloading to UpdateCheck

===============================================================================

# Version 3.8.9.rc1

* Weather reading for X-Plane 12 fixed which failed to recognize new files if the weather folder
  was intially empty. This affected METAR and GRIB (winds aloft) files.
* Updated export format MSFS IniBuilds A310
* Updated French translations by Patrick.
* Updated Italian translations by Flavio.
* Remove keys "url" and "download" from update check.

===============================================================================

# Version 3.8.8.beta

* Removing area/country codes from X-Plane country names now.
* New methods in FlighPlanEntry.
* Fixed performance issue when loading X-Plane METAR and GRIB (wind) files. Now only reading the
  latest three METAR and the latest GRIB file.

===============================================================================

# Version 3.8.7.beta

* Fixes for overriding log and settings path when using portable mode scripts.
  Corrected wrong settings file name from `little_navmap` to `little_navmap.ini` when using portable mode.
* Fix for X-Plane 12 METAR. Made file matching pattern more tolerant and applied
  optimizations for faster readin #950
* MoraReader now checks for table in nav and sim database.
* Moved ILS feather calculation to common function.
* Fixed issues where merge aircraft performance where example profile values showed up.
* Fixed on-ground flag for MSFS user aircraft.

===============================================================================

# Version 3.8.6.beta

* Fixed issue where airport city names were missing since MSFS SU11 beta.
* Added hemisphere indicator to all reading of coordinates where lat/lon is swapped in the UI.
* Added DataManagerBase::clearUndoRedoData
* Added method to clean up logbook database.
* Added XP11 and XP12 flags in simconnect types.
* Calculating RNP value now correct for procedures from X-Plane data.
* Reduced logging when reading GRIB wind files.
* Added option to hide title bars in dock widget handler.
* Added workaround for wrong on-ground state in MSFS AI.
* Changed fuel detection for MSFS. An airport now gets Avgas and Jet A availability assigned if it
  has a fuel pad (which has no fuel type information). #918
* Restructuring, code cleanup and optimizations in winds aloft code. #940
* Updated default aircraft performance file to get values without warnings.
* Fixed issue where paths were stored with the wrong separators in the database on Windows.
* Fixed remaining issues with macOS aliases. These can now be used in X- Plane `Custom Scenery`.
* Raised macOS minimum requirement to 10.13 High Sierra.
* Added support for macOS aliases
* French translations updated by Patrick.

===============================================================================

# Version 3.8.5.beta

* Added progress callback for long undo/redo operations which can be canceled now.
* Fixed issue where bulk import in logbook and userdata resulted in messed up undo state.
* Made reading of X-Plane `scenery_packs.ini` more error tolerant for XP12. Now only printing warnings.
* Now supporting symbolic links, Windows junctions and Windows shortcuts in MSFS `Community` and
  X-Plane `Custom Scenery` folder. Fixed exclude file, exclude directory and exclude add-on
  recognition to consider links.
* Fixed import and export for X-Plane 11 and 12 `user_fix.dat`. Now allowing null coordinates as well
  exporting and importing waypoint flags and full name. Userpoint tags are used to load and save the
  ID of the airport terminal area and the waypoint type.
* Fixed issue where X-Plane 12 add-on airports were not read from `Custom Scenery`. Airports not
  included in the file `scenery_packs.ini` are now treated like enabled. #927
* Changed FileSystemWatcher to support check for multiple files and parent folder to also catch new
  files. Now supporting X-Plane 12 weather files by checking folder `Output/real weather`. #926
* Added functions to calculate real canonical path and link target considering symbolic links,
  Windows junctions and Windows shortcuts.
* Now using canonical path to compare scenery library exclusions set from the user interface to
  avoid issues with symbolic links.
* Fuel sampling is now based on simulator time and requires the updated Xpconnect plugin.
* Added option to find growing containers causing memory leaks.
* labelForcedUpdate in widget util to work around labels not updated after style change.
* Fixes for wrong path display when loading XP scenery.
* Added initial and final bearing in pos to avoid cumbersome Marble methods.
* Updated Italian translation by Flavio Borgna.
* German translation updated.
* Partitioned build more to allow disabling of more modules with ATOOLS_NO_* environment variables.
* Prepated for Qt 6.

===============================================================================

# Version 3.8.4.beta

* Fixed error message when reading XP12 scenery packs file.
* Now falling back to Asphalt for undocumented, unknown or invalid surface types in XP12.

===============================================================================

# Version 3.8.3.beta

## Changes from 3.7.7.develop to 3.8.3.beta

* Added general properties column to the database metadata table. Now storing in properties if
  navdata update was found for MSFS to allow later database validation.
* Minor version of database changed to 27 to indicate change in metadata table.
* Added option to change full path to settings using an absolute or a relative folder.
* Changed handling for MSFS file `Content.xml` for SU10. Priorities for known base folders are now
  forced to lowest values to ensure the correct loading order. Other folders are loaded without any
  special order.
* Now ignoring waypoints with empty ICAO region code and invalid type as they appear in some MSFS
  add-on sceneries. #910
* Reduced logging for invalid MSFS BGL files.
* Now allowing BGL files from missions to catch respective airports for MSFS.
* Better logging in fspaths and other parts to find malformed simulator installations earlier.
* Community path for MSFS is now optional for detection but will throw an error on loading.
* Changed GPX loading and saving to use millisecond accuracy. Fixed timezone issues when loading and
  saving GPX. Changed SimConnecthandler to fetch fractional seconds from simulator. Replaced 32-bit
  second timestamp with 64-bit millisecond variables. #907
* Added reading code for Garmin GFP flight plan files.
* Added sample radius function to GlobeReader and increased sample size for lines to get more accuracy.
* Fixed issue where using export options resulted in missing waypoint names for pseudo waypoints in
  X-Plane FMS export. #902
* Added action button handler to take care of none/all/selection actions in toolbar buttons. #762
* More acronyms to convert airspace names to correct case.
* Increased database minor version to 26 for parking suffix change.
* Added suffix to airport parking. This is only used by MSFS but still MSFS cannot load its own plans
  saved with a suffix.
* Adapted reading of MSFS file `Content.xml` to changes in SU10 (1.27.11.0).
* Better error handling in navdatabase.
* Derived Exception from QException to allow passing exceptions across thread boundaries.
* Fixed database connection leak when compiling X-Plane scenery library.
* Added new methods in DockWidgetHandler to support non-modal dialogs.
* Added more altitude pressure equivalent layers for GRIB download for more wind accuracy at lower
  levels: 850 mbar (rounded to 4000 ft), 925 mbar (rounded to 2000 ft).
* Added fuel conversion functions. #892
* Messages for MSFS encrypted airports are now delivered as less alarming warnings.
* Fix for X-Plane FMS export using long airport ids.
* Fixed issue where SimConnectData::write() used the wrong date. Now corrected to use
  toSecsSinceEpoch().
* Fixed weather downloader to emit error message on empty METAR list for pages not returning a 404 error.
* Added option to DataReaderThread to save and update whazzup file during replay for tests.
  Corrected update time for all whazzup/JSON variants to use UTC. #761
* Added options to disable endless sim replay to generated whazzup from Navconnect replay. #761 and #754
* Reduced log spamming from SimConnectHandler.
* Now decreasing connection rate for long running sessions using autoconnect to avoid loss of
  internal SimConnect handles. After 30 minutes, an attempt is made to connect every 30 seconds, and
  after one hour, every minute. Workaround for #891 which is most likely a SimConnect issue.
* Merge pull request #17 from colingeniet/master Improve Flightgear flightplan IO.

## Version 3.7.10.develop

* Added push request #16 of @flpduarte. Fixed bug in which Little Navmap would only read and
  display a single transition from addon (Community) SIDs and STARs, despite these procedures
  actually having more than one transition. This happens when using the latest MSFS SDK (SU9 or later).
* Moved version number to variable in file `atools.pro` instead of coding into sources.
* Now writing files `version.txt` and `revision.txt` files into deployment folder allowing
  deployment scripts to automatically name archives.
* Added warning messages for encrypted MSFS add-ons when reading scenery library.
* Fixed issue where airport frequencies were written as 0 instead of null for MSFS resulting in
  wrong search results.
* Updated database minor version to 25. Reloading is advised.
* Allowing to set flags for HTML warning, error and note messages now. #656
* Extended tree dialog to allow disabling of items. Added signal handler for checkbox changes.
  #656
* Extended waypoint coordinate parser for all ARINC 424 Code Convention full degree waypoint
  formats.
* Now saving invalid and null parking names from MSFS with indicator `NONE` into the database to
  allow handling in flight plans.
* Now skipping empty X-Plane `apt.dat` files to avoid program freezing in an empty loop for
  malformed files.
* Fixed issue where OpenAir airspace files were not recognized as OpenAir format in some cases.

## Version 3.7.9.develop

* Corrected closed airport logic for MSFS. Now fully relying on closed airport flag for MSFS. This
  can result in closed airports having open runways and open airports having all runways open. #876
* Fixed issue where all airports were recognized as add-on with MSFS update 9.
* Fixed issues for updating airports by disabling a corner case from FSX and P3D which apparently
  does not apply to MSFS. Before a feature was not updated if the new airport did not contain new
  features like aprons or taxiways. Example LICC add-on.
* Corrected issues with true course runways in runway mangling and de-mangling functions. Simplified
  functions for runway comparison. #870
* Corrected issues with true course runways like in BGTL for X-Plane and DFD compiler. Approaches
  were missing runway assignments and could not be resolved. #870
* Reworked weather URL test functions to allow API keys. Added METAR format reader for IVAO JSON.
  Added header parameters to HttpDownloader for API keys. #864
* Fix for window icon notification prevents hiding toolbar on windows with `raise windows` enabled.
* Added airport transition level for X-Plane and DFD compiler. Improved transition level and
  altitude reading for X-Plane since users add various wrong variants.
* Fixed crash with OpenAir airspace reader. #490
* Added reader for IVAO and VATSIM JSON boundaries.
* Fixed exception while loading X-Plane scenery library if earth_hold.dat, earth_mora.dat or
  earth_msa.dat cannot be found in Custom Data despite existing fix, nav and awy files.
* Fixed issues with magnetic variation and inbound course in DFD and X-Plane compiler. Holding
  course is now written as magnetic course to avoid unneeded calculations. Databases minor version
  updated to 24.
* Fixed issue `Index out of bounds: Index: 5, size: 5` when reading X-Plane user_fix.dat with
  optional column missing.
* Prepared data compilation for X-Plane 12 based on limited information. Added X-Plane 12 detection
  to FsPaths. Now allowing the `no simulator` state instead of using always active X-Plane.
  #867
* Added "has_vertical_angle" and "has_rnp" to table "approach".

## Version 3.7.8.develop

* Updated French translation from Patrick.
* Navdatareader now exits with failure if basic validation fails.
* Incremented database version to 23.
* Added aircraft category to approach table filled by DFD compiler.
* Added Required Navigation Performance (RNP) field to approach_legs and transition_legs to DFD and
  X-Plane compiler.
* Added compilation of path points to DFD compiler.
* Fixed issue when downloading NAT tracks containing PBCS TRACKS AS FOLLOWS/V W X/END OF PBCS OTS
* Fixed crash when reading tracks.

## Version 3.7.7.develop

* Added flight plan export for iFly Jets Advanced Series. #817
* Now dropping all artificial waypoints created only for procedure or airway resolution from
  nav_search table.
* Fixed issue in scenery library loader where airports were wrongly recognized as MSFS POI dummies.
* Fixed detection of MSFS Navigraph update due to name change.
* Now passing unknown airspace types through when reading OpenAir format to allow using LNM internal
  types.
* Fixed issue where Mode C airspaces were imported with the wrong type when reading
* Changed execution order to allow checking of scripts table in database compiler.
* Fixed issue where theta and rho in procedures were written as 0 instead of null values in DFD and
  X-Plane compiler. This did not allow to recognize the difference between bearing 0 and bearing not
  given.
* Better error message when failing to read BGL files.
* Added undo/redo functionality to logbook and userpoint data manager classes. #280
* Fixed issues with anti-meridian detection when point is on meridian. Added anti-meridian split to
  line and line string classes.
* Fixed issue where flight plan metadata was not read correctly when loading LNMPLN or FMS.
* Added simulator field to aircraft performance.
* Added autopilot altitude option to aircraft simulation. #247
* Added more functions to clean up invalid characters in file names. Fixed issues with wrong regexp
  in adjustMsfsUserWpName. Added flight plan file pattern example and validation to flight plan.
  #751
* Fixed issue where runway end table had altitude not set for X-Plane and MSFS.
* Now skipping empty lines in X-Plane apt.dat file header.
* Added validation method for aircraft type designators.
* Improved style for tree view widgets. Added margins and grid for better readability.
* Small fixes to average class and debug aircraft function.
* Fixed issue in Rect::crossesAntiMeridian() where date line crossing was not always detected.
* Added X-Plane airport type to airport table.
* Changed runway dimension fields in database to floating point.
* Fixed issue in DFD compiler where runways with offset threshold were not depicted properly.
* Save expand state now optionally in tree dialog.
* Added classes for rolling averages.
* Added button groups to saving and restoring of widget states.
* changeWidgetColor now correctly considers disabled state of button.
* Added TreeDialog for settings. Copied ChoiceDialog from littlenavmap project.
* Added logging function to database metadata.
* Added saving and loading of custom departures to LNMPLN flight plan. Custom approach can now be
  saved with an offset course. #696
* Added ActionTool to help building context menus.
* Fixed X-Plane scenery compiler wrongly writing ENRT as airport ident for VOR, NDB, waypoints and
  holdings.
* Fixed issues with HTML images having an aspect ratio different than 1:1.
* Reading transition altitude from X-Plane airports now.
* Optimizations to HTML HtmlBuilder. Now using QStringBuilder. Added mark and id methods to
  HtmlBuilder. Now counting table rows and providing methods for detecting empty tables.
  #768
* Added descentSpeedForPathAngle #803
* Added vertical angle to approach and transition legs now read from DFD, X-Plane and MSFS.
  #803
* Added define option to silence scenery library compiler warnings.
  #797
* Better coordinate parsing. Removing separators now.
* Changed MoraReader to allow automatic selection of valid database.
* Added compiling of en-route holdings to DFD and X-Plane compiler.
* Added writing of airport MSA sectors and pre-calculated geometry to DFD and X-Plane compiler.
  #498
* Changes to airport index in compiler. Added file id to MORA table. Avoiding invalid positions in
  MagDecReader::getMagVar now. Preparation for #363 and
  #498
* Added writing of MORA grid from X-Plane database in data compiler.
* Increased feather width for GLS and RNP approaches in DFD and X-Plane compiler.
  #640
* Corrected assignment of runway end ids to ILS in DFD compiler.
* Added SBAS/GBAS paths points and stations to X-Plane and DFD databases. Fixed issues when
  resolving recommended procedure fixes in DFD compiler. Now also searching for ILS and other
  approach facilities. Added ils type to FSX/P3D/MSFS compiler. #640
* Fixing equal runway end positions for DFD compiler now which resulted in zero-length runways when
  drawing. Corrected wrong number of ILS for airport in DFD compiler.
* Added gate positions to DFD compiler.
* Added arinc_type for detailed waypoint information to tables waypoint and nav_search. Populating
  arinc_type for X-Plane and DFD database compilers.

===============================================================================

# Version 3.6.17

* Added new record type for airport apron appearing since MSFS SU6 beta. Reading apron structure
  for new MSFS record. Disabled warning about unknown airport record types when compiling
  MSFS data. #799
* Fixed bug with wrong airspace assignment for class F and G when reading OpenAir files. #797
* Better coordinate parsing. Removing various separators now.
* Corrected MSFS dummy POI airport detection. Now ignoring airport closed flag which removes POI
  wrongly detected as airports.
* Corrected missing index in airport table slowing down searches by official airport ids.
* Added departure parking position heading to LNMPLN.
* Updated XSD flight plan schema.
* Fixed issue when calculating flight plans using radio navaids where too close navaids where
  selected enroute. Example: PAYA MDO ODK CDB ELF DUT PADK where CDB and ELF are too close resulting
  in zig-zag routing.
* Reduced warnings for unknown BGL records in MSFS to avoid flooding the log with messages when
  reading scenery.

===============================================================================

# Version 3.6.16

* Fixed X-Plane FMS export to always use ADEP/ADES keywords for airports except for those with long
  internal id or those with ICAO, FAA or local id not equal to internal id. This avoids loading
  issues in X-Plane FMS and third party tools. #741
* Now truncating all X-Plane airport idents to six characters. Also the ones used in intermediate
  waypoints. #741

===============================================================================

# Version 3.6.15

* Added FAA and local ident columns to airport table for X-Plane loader. Removed xpident column in
  airport table and simplified handling of airport idents. Now always storing ICAO in table if given
  in X-Plane airport metadata. #706
* Adapted MSFS scenery library reader code for procedures to new BGL file structure in MSFS since
  1.18.9. Needed to avoid missing procedures. #735
* Added function in DockWidgetHandler to forbid window moving by title bar.
* Now checking MSFS airports for open runways to work around inconsistencies between closed/not
  closed runways and airport closed flag. Example KODX which has airport closed flag set but an
  open runway.
* Fixed issue where localizer approaches were not recognized when loading MSFS PLN files.
* Corrected export for circling approaches and localizer backcourse approaches in MSFS PLN which
  can now be loaded.
* Fixed issues with X-Plane flight plan export where airports have an internal ident different from
  official ICAO and FAA codes.
* Database minor version updated to 20.

===============================================================================

# Version 3.6.14

* Fixed issue where empty folders like `OneStore` in the wrong place confused detection of MSFS. Now
  also checking for file `.../fs-base/layout.json` in required path.
* Added support for IVAO JSON 2 format in whazzup parser. Removed unused airport table and unneeded
  columns from online database schema. Code cleanup and reorganized. #722
* Adjustments for detection of user aircraft flying to avoid creating log entries for low passes. #693
* Now logging empty or inaccessible XML and JSON files found while scanning for MSFS or P3D scenery
  instead of throwing an exception. #720
* Saving and loading departure type (runway, parking, helipad, etc.) to LNMPLN now.
* Now computing ARINC approach id (e.g. `I27C`) for all approaches from FSX, P3D and MSFS.
* Fixed issue where Garmin Base Camp could not load GPX files. Added missing attributes and default
  namespace.
* Now avoiding ICAO region when exporting MSFS flight plans since it is not reliable for airports and
  the sim garbles the flight plan when loading.

===============================================================================

# Version 3.6.13

* Adjusted PLN flight plan export to allow export for ISG gauges.
* More relaxed user waypoint naming conventions for MSFS. Adjusted allowed characters for MSFS user
  waypoint names. Now replacing special characters with related ASCII.
* Now omitting visual reporting points (like `VP123`) and other obscure numbered waypoints from
  route calculation. Also ignoring half degree points like `H5711` now.
  Simplified and optimized loading of routing network.
* Added departure parking type to flight plan to allow export for MSFS departure parking position.
  Enabled parking position for MSFS flight plan export and import.
* Corrected airport filter to avoid omitting airport updates when loading FSX/P3D/MSFS scenery.
* Fixed reading of new procedure records in MSFS BGL. Thanks to @icykoneko for the implementation
  and the help. Closes #649
* Fixed issue where some navaids did not get airport_id assigned if in different BGL file. Now
  resolving id later in database after reading BGLs.
* Fixed loading and saving of GPX tracks. Now also considering timestamps and disconnected track
  segments.
* Prepared user aircraft data blocks for future functions. Added data flags to allow omitting
  strings. Added autopilot set target altitude.
* Added decodeTransponderCode and fixed decoding for FSX, P3D and MSFS. #525
* Added transponder code to user and AI aircraft. Fetching transponder code for all simulators now.
  Increased data version to 11 to force incompatibility. Added properties to avoid future
  incompatibilities when adding new value types. #525
* Added new airspace types MCTR, TRSA and GCA where the last one is for unknown and general
  airspace types. #607
* Fixed issue where a flight plan calculation resulted in not optimal routes. This happened when a
  nearby navaid connected to the airway system could not be found.
* Now omitting closed dummy airport structures having no runways which are added as MSFS POIs.
* Corrected Aerosoft CRJ flight plan export. Adapted changed keywords in flp file and compressing
  airway segments now. #632
* Write MSFS SIDs and STARs to database
* Corrected default flight plan pattern to use departure and destination ident if flight plan
  pattern is empty.
* Changed exception for invalid files in X-Plane CIFP path to warning in log file.

===============================================================================

# Version 3.6.12.beta

Unofficial beta release.

===============================================================================

# Version 3.6.11

* Adapted URL for winds aloft download to NOAA changes and added `atmos` as directory. This fixes
  the `Error downloading or reading wind data` issue. #623
* Now disabling wind and other downloads with log warning message if URL is empty. #623
* Corrected approach identifier in FLP flight plan export and loading for Aerosoft aircraft. Now
  using ARINC identifier for approaches and ignoring transitions of type `VECTOR`.
* Added patch by Slawek Mikula to support loading of Avia Maps flight plans. #616
* Added support for new faster VATSIM JSON feed. Allowing centers without coordinates now. #606
* Now ignoring invalid content types like `Unknown` in MSFS `manifest.json` file which are often
  set wrongly by add-on developers. Added warnings for JSON parsing errors in files `layout.json` and
  `manifest.json`.
* New gzip decompression methods for HTTP downloads. Added accept encoding to HTTP downloader to
  allow compressed downloads. All weather download classes now accept gzip encoding.
* Fixed issue where userdata CSV backup files could not be imported and needed to be manually
  corrected before import.
* Updates for detection of military airports and name capitalization.

===============================================================================

# Version 3.6.10

* Updated translations.
* Updated for acronyms in name capitalizing function for airport names.
* Fixed error when reading procedures with invalid or unknown approach types from FSX, P3D and MSFS.

===============================================================================

# Version 3.6.9

* Fixed error when downloading PACOTS tracks.
* Improved error handling for unreadable track information. Program now logs an error message instead of crashing.
* Fixed error when reading procedures with invalid or unknown approach types from FSX, P3D and MSFS.
  Now logging error instead.

===============================================================================

# Version 3.6.8

* Added separate departure position field to flight plan for parking, helipad or runway/start.
  Fixed flight plan export to use correct departure position in PLN  DepartureLLA and LNMPLN Start
  element. #613
* Corrections to X-Plane FMS export. Using DEP and DES keywords now instead of truncating ident.
* Added verbose logging for X-Plane compiler based on navdatareader.cfg. Added warnings if rows are
  not written to the database.
* Removed extra space in flight plan export for iFly (text format .FLTPLAN).

===============================================================================

# Version 3.6.7

* Corrected issue where status bar was hidden on first start after first installation in dock
  handler.
* Now also including MSFS scenery with content type `CORE`.
* Now skipping maintenance.bgl file in MSFS scenery library which causes error messages when
  loading scenery library.
* Airport names now loaded from base scenery with Navigraph update in MSFS. Were missing previously.
* Now omitting scenery library entries which are marked with active=`false` in Content.xml.
* Applied workaround for XML files with wrong encoding in header (processing instruction).
* Fix for GPX export to allow saving of files without route.
* Added recovery if main window gets off screen after changing monitors.
* Fixed issue with X-Plane FMS plans where long airport idents like `XRP0001` could not be loaded. Idents are now truncated.
* Now marking waypoints being part of procedures when loading which allows to avoid them in flight plan calculation.

===============================================================================

# Version 3.6.6

* Replacing more obscure minute signs like apostrophes now in coordinate parser .
* Excluding Navigraph manifest file now to avoid error messages with package `navigraph-maintenance`
  when reading MSFS scenery data.

===============================================================================

# Version 3.6.5.rc1

## Changes

* Now excluding wrong negative times from flight time calculation in logbook stations.
  This can happen if a simulator reports wrong UTC time or a user changes sim time during flight.
* Added total numbers to logdata query.
* Limited localizer width to 20 degree to avoid excessive values from FSX and MSFS breaking ILS geometry.
* Fixed issue with missing longest runway surface for airports with MSFS.
* Changed ordinate order in GPX file export to fix Google maps import issues.
* Updated translations.

===============================================================================

# Version 3.6.4.beta

## Changes

* Fixed MSFS flight plan export missing region codes.
* Fixed issue with missing longest runway surface for airports with MSFS.

===============================================================================

# Version 3.6.3.beta

## Changes

* Fixed parsing of the incomplete METAR date. This could result in reports having the wrong date.
* Fixed issue where METAR reports might not be updated in index which could result in missing updates.
* Added support for coordinate parsing from Wikipedia which uses special characters to minute and
  second symbols. Coordinates like `40°41′21″N 74°2′40″W` can now be directly pasted into
  _Little Navmap_ dialogs.
* Floating dock windows now also set to stay on top to avoid main window hiding them.
* Now imitating the behavior of MSFS if an scenery update tries to reuse the ident of an airport
  for a new one. Example: Boyd Field (54XS) in MSFS which actually Bar C Ranch Airport (54XS) in
  real life at another location.
* Fixed issue where military airports were not recognized in add-ons.
* Minimized state is now reverted to normal window state when restoring.
* Updated Chinese translation from John Liu.
* Adjusted detection of MSFS Navigraph navdata update to avoid all airports being detected as add-on.
* PLN files now have altitude set for all waypoints.
* Better error reporting for flight plans now including filename.
* Fixed crash when loading LNMPLN flight plans with an empty waypoint list.
* Removed ICAO region code from MSFS export to improve loading in simulator.

===============================================================================

# Version 3.6.2.beta

## Changes

* Fixed issue where program could appear frozen while counting files for loading scenery.
* Fixed detection for military airports in MSFS and extended this with new phrases.
* Now capitalizing all airport names for FSX, P3D and MSFS to fix wrong airbase designators
  like  `Afb`.
* Fixed issue with NOAA weather downloads where a missing internet connection flooded the log and
  caused the program to crash. Now applying a grace period of three minutes after an error which
  blocks new downloads for METAR requests.
* Removed wrong rounding of COM frequencies.
* Now checking for all paths `Community`, `fs-base` and `fs-base-nav` before recognizing a MSFS
  installation as valid.
* `asobo-airports-*` in `Official\Steam` or `Official\OneStore` are now flagged as add-on.
* Added logging for airports that have features more than 10 NM apart.

===============================================================================

Version 3.6.1.beta

FSX, P3D and MSFS:

* Fix for blinking aircraft when updating weather over SimConnect.

MSFS:

* Fixed issue with `NOT NULL constraint failed:tmp_waypoint.ident Unable to fetch...`.
  Navids with empty names are now ignored and printed into the log with BGL file name.
* Changed default MSFS Steam flight plan path to base folder `Microsoft Flight Simulator`.
* Workaround for wrong 0/0 positions sent out by MSFS.
* Localizer heading for MSFS now saved correctly in scenery database.
* Also looking in `OneStore` and `Steam` folder for add-ons now.
* Updating administrative names in airports now if missing in update. This also corrects missing
  names for the Navigraph navdata update.
* Adapted to Navigraph navdata update 12 for MSFS.
  Updating only needed features which are airports, COM and ILS. Everything else is ignored and not
  needed since it can be updated directly for Little Navmap.
* Corrected ILS course for Navigraph update in simulator. Slight variations like for EDDM remain.

Other:

* Airports with empty names now raise an exception which will show an error dialog to the user.
* Htmlbuilder now adds space for tables if value is empty to avoid layout issues.
* Removed unneeded indexes from tables `nav_search` and `taxi_path` to shrink database.
* Updated to world magnetic model 2020. This will be used to calculate X-Plane declination when
  loading the scenery database.
* Fixed issue where declination was not created correctly for locale which do not have a . as
  decimal separator. This is due to functions in WMM code. As a result of the issue declination was
  20 degrees off near VORDME STN in X-Plane, for example. #564
* Removed unused delete_airport table to speed up loading and to keep database small.
* Now capitalizing airport, city, state and country names when loading FSX, P3D or MSFS data.
* Fixed error `Bind name "flightplan" does not exist` when importing logfiles from CSV or X-Plane.
* Fixed issue where NOAA weather download period could not be set correctly.

===============================================================================

Version 3.6.0.beta

Flight plan export (class FlightplanIO):

* Added saving and loading for new native LNMPLN format which supports all flight plan features.
  Added comment field to flight plan and entries. Updated flight plan file type detection. Removed FSX
  related stuff from Flightplan class: Waypoint ID, route type (DIRECT, VOR, etc.). #293
* Fixed issue with waypoint numbering when exporting plans for EFB.
* Small improvements to BBS (Blackbox Simulations Airbus) export. User waypoints now converted to
  decimal-minute coordinate format. Type is now always set to 3. Procedures are not exported.
* Attempt to solve problems with iFly fltplan export.
* Added flight plan export format for Aerosoft CRJ.
* Now omitting invalid positions when saving and loading GPX files. Fixed exception/crash when
  loading GPX with invalid position in class FlightplanIO.
* Changed aircraft performance file saving to new XML format. Old INI format is automatically
  detected and can still be loaded and saved. #523
* Removed flight plan property keys for loading outdated FSX procedures.

Scenery Database:

* Progress for scenery database loading with FSX/P3D, X-Plane and DFD reworked to avoid
  under- or overflow and to have a more balanced progress rate.
* Fixed issues with user home folders containing special characters. This caused various
  issues when detecting flight simulators.
* Now adding artificial waypoints to allow procedure fix resolution in LNM versions <= 2.4.5 in DFD
  databases. Added method to remove all unneeded data for LNM versions > 2.4.5 in DFD database.
* Added more invalid taxiway names like `_` to avoid in X-Plane.
* Added new columns `flightplan`, `aircraft_perf` and `aircraft_trail` to logbook table.
  Added CSV export and import options for new logbook columns. Fixed issue where column order might be
  mixed up on export and import. Added callback option for type conversion in SqlExport. #432

X-Plane:

* Added new X-Plane icing options: AOA, inlet, prop, static and window ice given in percent maximum if multiple sources.
* Added more icing options for X-Plane as well as new boat types frigate and carrier.

Weather:

* Corrected parsing of METAR which failed to read pressure after `//////CB`.
* Now reading full VATSIM weather file instead of doing single and slow requests for each airport.
* Solved issue where class FileSystemWatcher caused weather and GRIB to be updated twice. Stopped
  FileSystemWatcher from sending signal after initializing.
* Attempt to fix download issues with regional format on Windows which let GRIB wind downloads fail
  in some cases. #536

Other, technical, internal or development related:

* Fine tuned flight plan calculation to use navaids close to the departure. This fixes missing airway
  when starting at a SID exit point. #478
* Moved tool button actions in TabWidgetHandler to menu which allows to add separators and to show
  tooltips. Now disabling actions `Show All` and `Close all Except` depending on number of open tabs.
* Added saving and loading of main window layouts to DockWidgetHandler.
* Now making tool tips visible per default in recent menu (class FileHistoryHandler). #451
* Added full screen functionality to dock handler and fixed issue where dock window sizes were not
  restored properly. #121
* Added handling in all download classes for SSL errors like they happen for self signed
  certificates, for example.
* Made TabWidgetHandler more tolerant against old or wrong saved states.
* Added reading support for Garmin FPL format.
* Added airline track system parsing and downloading of NATS, PACOTS and AUSOTS from
  airservicesaustralia and faa.gov
* Updated SimConnect data version to 10 to force incompatibility.
* Added normalize function to Pos::endpoint() to avoid errors.
* Coordinate format longitude/latitude can now be read back by atools::fs::util::fromAnyFormat().
* Added option to DockWidgetHandler to forbid snapping dock windows back into main.
* Added raise and activate windows options to dock widget handler.
* Complete cleanup in weather download classes. Combined weather download functionality into base
  class WeatherDownloadBase. Moved all METAR download, parsing and disambiguation functionality into
  MetarIndex. Now using faster nanoflann based nearest neighbor search for getting adjacent weather
  stations.
* Fixed error handling in DataReaderThread for incompatible data versions. Now disconnecting if
  version or magic number does not match in data packet.
* Added quote and simplify to cleanFilename. Removed flight plan filename building methods and
  replaced these by one pattern based.
* Added detection for translation files in class Translator. Removed override language option in help
  handler. #352
* Added `Import Filename` to userdata CSV export.
* Removed option to force route calculcation algorithm to use closest radio navaids near start and
  destination before waypoints
* Removed all rhumb line calculation methods.
* Added a maximum of 20 warning on FileSystemWatcher to avoid log flooding on missing file.
* Added reading for GPX files in FlightplanIO. More support methods for attached files/BLOBs in
  LogdataManager.
* Added reading of waypoint names from attached logbook GPX.
* Changed userdata export headers for more readability. Added header option for CSV export in
  userdata.
* Added header option to logbook export and added header detection on import. #432
* Fixed issues where `visible_from` in userdata was exported as floating point number which
  resulted in fallback to default value on import.
* Added options to save and load compressed LNMPLN and GPX files in class FlightplanIO. Added Gzip file
  detection and schema update support for adding new columns in DataManagerBase. #432
* Updated file roller to allow usage of file rename patterns.
* Fixed issue where default directory in file dialog was not used with empty settings prefix.
* Fixed issue where a message dialog did not show up again after unchecking `Do not show again`
  and pressing the help button.
* Updated logging for separate debug message and narrow patterns which remove namespaces from class
  and paths from filenames for better readability.
* Added options for POST in class HttpDownloader.
* Moved route calculation classes out of littlenavmap repository to atools to ease testing and reuse. #466
* Added fast spatial index for radius and nearest neighbor searches. Added Point3D and conversion
  methods in Pos for converting earth coordinates to 3D euclidean space. Added nanoflann header for
  spatial search. #466

===============================================================================

Version 3.4.7

Mostly fixes for DFD and other data compilers.

All data compilers and schema changes:
* Updated database minor version to 18 to reflect changes.
* Fixed issue with duplicate waypoints in airways for DFD, X-Plane and FSX/P3D compiler causing
  defects in airway network. Examples: MY/EK and SYA/PA. #516
* Added flag `artificial` for NDB and VOR waypoints which are created to simplify
  airway construction. Useful for debugging or future versions. #516

DFD:
* Updated DFD compiler to create new and separate UIR FIR airspace types besides the old
  deprecated center with `(FIR)` or `(UIR)` in the name. These new types will be used by the next
  Little Navmap version. Current versions 2.4.X are compatible with this change and show
  the old centers. #462
* Fixed issue where runway ends with more than one ILS had all except one detached from runway.
  Example: `EDDF RWY25R ILSZ IFNW`. #532
* Coordinates for fix and recommended fix in procedure tables added. Used for better navaid
  resolution in next Little Navmap version. #205

X-Plane:
* Improved removal of `[X]` prefixes in X-Plane and fixed issue where military airports were not
  detected in all cases.
* Changed airport ident to ICAO code for X-Plane compiler now. XP internal ids are now avoided
  except in duplicates. Added xpident to airport table which keeps the internal ID for
  X-Plane airports. #448
* Added runway smoothness and airport flatten flags from X-Plane to database schema.
* Corrected navaid range calculation for X-Plane. 125 NM is now treated as unpublished.

P3D:
* Fixed issue with P3D v5 not loading tower, unicom and other frequencies for all airports.
  As a result all airports are shown in magenta color.

===============================================================================

Version 3.4.6

P3D v5: #512
* Added P3D v5 for simulator detection.
* Adapted loading of BGL files to P3D v5 structure changes and added new records
  as well as new COM and other types.
* Enabled loading of add-on packages from `%USERPROFILE%\Documents\Prepar3D v5 Add-ons`.

Other:
* Fixed error reporting in wind download and decoding. #480
* Chinese translation by John Liu.

Build:
* Added option to include common `../build_options.pro` file with defines for qmake.
  File is included automatically if it exists.

===============================================================================

Version 3.4.5

Separated creation of routing schema and data from other compiler steps.
* Routing tables are now kept but not populated if disabled.
  This is done to avoid crashes with older LNM version accessing the new database. #466
* Added airway route type to DFD compiler. #466

===============================================================================

Version 3.4.4

* Fixed issue where scenery entries were read despite being disabled in add-ons.cfg for P3D.
* Discovery paths from add-ons.cfg are now read for P3D.

===============================================================================

Version 3.4.3.rc1

* Fixed issues resulting in wrong fuel conversions.
* Tab widget reset now reverts locked state when calling reset.
* Disabled color buttons on macOS since the look wrong.
* Removed logging banners inflating log unnecessarily when loading P3D or FSX scenery library.

===============================================================================

Version 3.4.2.beta

* Fixed issues when reading GRIB winds aloft or WMM (magentic declination) data on Windows
  if user's home path contains special characters like umlauts or accents.
* Added real ICAO code to airport to circumvent issues with X-Plane artificial airport ids.
* Added IATA code to airport table.
* Database minor version up to 15.
* Now ignoring first zero value when interpolating fuel for aircraft performance.
* Updated French and Italian translations. Now complete.

===============================================================================

Version 3.4.1.beta

* Changed aircraft performance handler to detect cruise if aircraft is above cruise altitude.
* Made file name display in dialogs consistent.
* Added methods to clear program settings and restart application.
* Added debug output to log for scenery configuration when loading scenery libraries.
* Fixed macOS tabs which grow too big depending on style.
* Added route description field to logbook.
* Added dock widget handler which allows to deal with stacked docks properly.

===============================================================================

Version 3.4.0.beta

* New coordinate format for parsing: Plain numbers with sign.
* Added display of SSL version into about dialog.
* Fixed several METAR parsing issues. closes #441
* Reduced exaggerated number precision in CSV userpoint export.
* Added TFDi Design 717 flight plan export format. #399
* Fixed issue where table cells where initially not resized properly in itemview zoom handler.
* Now ignoring special ASX weather files written for X-Plane. Fixed excessive logging about missing
  file. #422
* Added tab widget handler to manage movable and closable tabs.
* Fixed display flags for transparent aprons in X-Plane.
* Added geometry callback for whazzup parser to fetch user airspace geometry. Trying to get center
  boundary and falling back to circle shape if missing.
* Removed option to read airspaces from `Documents/Little Navmap` in X-Plane compiler.
  Refactored reading of OpenAir airspaces out of X-Plane compiler for general usage.
  Added option to create schema for user airspaces only. #236
* Aircraft performance handler: Fixed issues in where states were not detected properly.
  Corrected fuel calculation which is now only done if fuel flow is detected to avoid case where
  user changes fuel in the simulator.
* Fixed issue where aircraft descending was not detected. Added method to give aircraft state as
  text. #340
* Added method to check X-Plane file `scenery_packs.ini`.
* Potential fix on macOS folder resolution problems that appear when using case sensitive file
  systems.
* Better error handling and reporting around `magdec.bgl` file and database. Now falling back to WMM
  if file could not be read.
* Added methods to get statistics for logbook entries. #346
* Set codec to UTF when reading X-Plane and weather files.
* Replaced exit on failure with abort to get core dump.
* Added functions and SQL scripts for logbook management. Created base class for userdata and
  logbook data manager. More refactoring around fuel calculation.
* Removed obsolete FSX logbook code.
* Added support for gui_label 3D attribute in X-Plane 11.35 and higher. Updated rating calculation.
  #424
* Fixed error in rating calculation function for X-Plane. #410
* Updated aircraft performance class and collection handler for permanent data collection.
  More get methods for fuel volume and weight in performance. #340
* Updating aircraft performance alternate parameters with cruise parameters as default now when
  collecting. #367
* Added alternate speed, alternate fuel flow, min runway length, runway type and usable fuel to
  aircraft performance. #367
* Adapted wind download to new NOAA url changes. Added more debug output for wind download.
  #283
* Added flight plan properties for custom approaches. #307
* Added flags field for flight plan entry. Added flags and support for alternate airports.
  #230
* Added two second delay for initial weather download of NOAA data. #283
* Added option to application to disable exception dialog.
* Changed NOAA weather download schedule to catch latest METARs. #359
* Refactoring of weather, METAR and download code. Added class to download NOAA METAR files to
  avoid requests for single airports. Bug fixes in station index. #359
* Added geomagnetic model calculation class. MagDecTool. Changed X-Plane and DFD compiler to save
  declination based on current year and month into database. #300
* Wind query allows to interpolate wind for lines through levels now, i.e. lines with positions
  having different altitude. Added point interpolation methods that also considers altitude set in
  position. Changed wind query interface to use altitude from position.
* Fixed crash that appears when using fsAerodata cycle 1905r1 or later. #413
* Added support for X-Plane 8.33 kHz frequency spacing. #409
* GRIB downloader now allows to set base URL. Changed GRIB reader to ignore data sets with invalid
  parameters instead of throwing an exception. Wind query class not checks file for changes. Now
  interpolating between null values and next upper layer if querying wind data for a level lower than
  the lowest. #283
* Fixed issue where temperature and QNH were omitted if METAR contains //////TCU string.
* Fixed issue when saving flight plans from airports with empty names (crashes P3D).
* Fixed issue where QNH was not recognized with invalid temperature.
  Example: `EIWF 041830Z 01007KT 340V040 CAVOK ///// Q0988`
* Fixed Maddog X export to use correct file extension mdr.
* Fixed several issues in HTTP server due to abuse of QSettings (forced write back) for parameter
  passing. Implemented own INI reader class since QSettings cannot be set to read only. #163
* Added option to save list view selection state in widget state.
* Added web server by Stefan Frings (https://stefanfrings.de/qtwebapp/index.html). #163
* Fixed parsing issue with coordinates when using C locale.
* Fixed issue when loading old style aircraft performance files where key ExtraFuelLbsGal is not recognized.
* Fixed missing `=` in cruise altitude for BBS export. #396
* Made loading of X-Plane FMS flight plans more tolerant for wrong `DIRECT` instead of `DRCT` which
  comes from invalid SimBrief plans.

Build and Deployment for Developers: #387
* Updated for Qt 5.12.4. Changed OpenSSL to 1.1.1.
* Linux compilation now uses system OpenSSL again and is based on Ubuntu 18.04.
* Added build for Travis CI. Thanks to Jannik for all his work!
* Complete update of project files to allow configuration with environment variables. Removed all hard coded paths.
* Added documentation about environment variables to configure build and updated build instructions
  in `BUILD.txt` and `atools.pro` files.

===============================================================================

Version 3.2.4

* Fixed issue with wrong waypoint numbering in FlightGear export causing the simulator to crash.
  This happens only when using SID and/or STAR. #361
* Now disabling aircraft performance collection when sim is paused or replaying.
* Now choosing separator for file auto numbering on save depending on filename.
* Changed email address and links. #238
* Updated translations.

===============================================================================

Version 3.2.4.rc1

* Fixed issue with error messages when loading OpenAIR files with missing airspace class. Now omitting only the invalid airspaces.
* Made METAR parser more tolerant for invalid temperature values not separated by /.
* Fixed issue in whazzup parser which could result in invalid dates on systems with AM/PM data locale setting.
* Added option to file dialog to add number to default file name if file already exists.
* Avoiding access to invalid empty paths when detecting simulators.
* Small fix for missing simulator type in online networks.
* Airports with helipads and closed runways are now considered open.
* Now considering helipads for rating calculation for airports.
* Now looking for registry keys in a case insensitive manner.
* Options/Language override in settings now fixed for online help and legend loading.
* Forcing altitude when setting departure position in flight plan.
* Fixed wrong display of exception messages with special characters in Windows.
* Added saving and loading of FlightGear XML flight plans. #361
* Adapted flight plan file type detection to new plan format and improved it.
* Added export for Leonardo Maddog X. #232
* Added export for QualityWings aircraft. #335
* Added export for AivlaSoft EFB. #226
* Added flight plan export for FeelThere and Level-D. #206

===============================================================================

Version 3.2.3

* X-Plane scenery_packs.ini now read case insensitive.

===============================================================================

Version 3.2.2

* Now reading scenery_packs.ini with correct encoding to avoid issues where paths have special characters.
* Updated database minor version to 13.
* Updated German translation.

===============================================================================

Version 3.2.2.rc2

* Fixed rounding error for COM frequencies in DFD compiler.
* Fixed warning message `q_startOperation was called more than once` by skipping if already downloading weather files.
* Change test URL function to allow also files.
* Added methods to fix com frequencies into 25 kHz steps.

===============================================================================

Version 3.2.2.rc1

* Fixed issues where files were not shown and selected in Windows Explorer.
* Small improvements to file system watcher to improve reliability.
* Heading for online aircraft now read correctly as true heading for VATSIM and IVAO.
* Updated French translation by Patrick.
* Fixed issue in Rect::getWidthDegree that caused wrong zooming in LNM on the anti-meridian.

===============================================================================

Version 3.2.1.beta

* Added saving of altitudes for X-Plane FMS formats.
* Fixed issue when creating bounding rectangle from radius covering one of the poles.
  This affected distance search in LNM.
* Fixed issue where short lines were given wrong elevation (first 0) in GLOBE reader.
* Renamed fuel key names in aircraft performance file and added update functions.
* Fixed update time in whazzup parser.
* Added option to limit excessive error logging in whazzup reader.
* Fixed regression when reading whazzup files where heading and other values were missing.
* Added fuel type to performance class now allowing conversion from weight to volume.
  Performance handler now detects fuel type and uses lbs as default now. #255
* Added saving of widgetstate for editable combo boxes.
* Updated French translation from Patrick.

===============================================================================

Version 3.2.0.beta

* Fixed issue for FSX/P3D flight plans missing byte order mark which were not accepted by ASN or ASX.
* HtmlBuilder now allows to set table background and alternating background color. #246
* Fixed issues with assignment of stray VASIs to runways in X-Plane.
* Renamed `ACC` to Area Control Center for online centers. More small refactoring. #267
* Added facilities for automatic performance calculation. #255
* Added aircraft performance data class. #255
* Added accepted extensions for drag and drop. #291
* Changed normalize functions to avoid program freezes. Added normalizeRange functions.
* Added flightplan_estimated_arrival_time to online database schema. Calculating flightplan_estimated_arrival_time now. #303
* Filtering invalid time values `0` from now. All whazzup text parser for #303
* Fixed potential geometry problem reading X-Plane airspaces.
* Added copy functions for procedure properties. #264
* Added function to calculate crab angle from wind, course and TAS. #284
* Work on HTML builder. Added copy operator and constructor and more methods for table data. #284
* Fixed issues with symbolic links in scenery loader. Now using paths as is instead of converting to canonical paths. #29
* Added scenery configuration exclude options for single files. #29
* Added file system watcher which hopefully fixes problems with not recognized updates.
* Improved color change for push buttons in changeWidgetColor. #197
* Added class for drawing rounded polygons. #197
* Now setting airport_id for ndb, vor and waypoint in DFD compiler. #289
* Added restrictive_designation and restrictive_type to boundary table and DFD compiler.
* Added mora_grid table for minimum off route altitude data to schema. DFD compiler now populates mora_grid table. #84
* Added methods to TimedCache to avoid flushing old objects. #6
* Fixed garbled unused data in Metar class. #6
* Metar class now calculates flight rules. #6
* Attempt to fix weather loading issues (disappearing report) for X-Plane metar.dat. Weather data is now kept if file was deleted.
* Now reading scenery_packs.ini for X-Plane to allow disabling of scenery by tools. #151
* Now fetching the first X-Plane installation path from x-plane_install_11.txt as base path.
* Added sunrise and sunset calculation. #281
* Added multiple_code and time_code columns to schema to indicate overlapping airspaces. #279
* Added arinc_descr_code to database that allows to identify IAF, MAF and FAF #196
* GridDelegate now allows to update colors on style change. #142
* Refactoring in cleanup in logging system. Log files can now be rotated if a given size is exceeded. #275
* X-Plane parking positions are now at correct coordinates. #256
* Updated all translations.
* Database minor version updated to 13.

===============================================================================

Version 3.0.3

* Fixed issue where aprons from stock airports remained in add-ons.
* Updated French translation from Patrick.
* Fix missing first update of X-Plane weather.
* Fixed issues with export for flight plans for iFly 737 that could crash the simulator.
* Fixed issue when parsing whazzup with small timeintervals.
* Now assuming that aircraft is on ground for VATSIM and GS < 30 kts (VATSIM has no on_ground indication).
* Now logging all warning dialog messages to logfile.
* Fixed translation issues in navserver resulting in confusing messages in Little Navconnect log window.
* Increased Garmin userdata export ident length.
* Workaround for invalid record length for NDB and waypoints in APX27190.bgl from P3D v4.3 which causes errors
  when reading the scenery library.

===============================================================================

Version 3.0.2

* Updated translations: Brazilian Portuguese, French, Spanish and German. All finished.

* Now exporting all userdata columns. Added last_edit_timestamp and visible_from. Columns are optional for import.
* Fixed region field not adjusted in X-Plane userdata export.
* Now filling temp flag in userdata on import to avoid wrong indication of temporary userpoints.

* Fixed issue where missing centers were interpreted as an empty online database.
* Now using minimum and maximum circle radii for online ATC geometry.
* Added version to palette settings to allow upgrades for color customization files.
* Added functions to create shadow aircraft that exist in both the simulator and online network.

===============================================================================

Version 3.0.1.beta

* Weather texts are now shown translated.
* Added separate online control center radius instead of using visible range in online centers. #45

===============================================================================

Version 3.0.0.beta

* Added complete data management and parsing for IVAO, VATSIM and custom `status.txt` and `whazzup.txt` files.
* Fixed issues with X-Plane user_fix.dat export. Now using correct metadata so that X-Plane can read the file.
* Issues with X-Plane and Garmin userpoint import and export fixed.

* Added script by Gérard to clean out fake runways for AI in FSX/P3D.
* Added logging for airport altitude when reading delete records from FSX/P3D.
  Example: `Add-on airport altitude for VQ10 changed from 7703 ft (BGL Scenery/0902/APX72220.bgl) to 8363 ft`
* Improved BGL file and scenery reading to include hidden and system files.
* Fixed issue where approach name and/or suffix were not read correctly in X-Plane and DFD compiler.
* Fixed error with duplicate VOR/NDB waypoints in DFD compiler.
* Now ignoring artificial circle-to-land approaches in DFD compiler.

* Flight plan export for Blackbox Simulations Airbus. #200
* Added loading method for FSC flight plans.
* Export for iFly flight plan file. #231

* Now removing empty journal files from database when closing.
* Database locking improved.
* Added gzip tools.

Version 2.9.1.develop

* Now filtering out taxiway garbage names in X-Plane compiler.
* Added transition_altitude to airport table for DFD compiler and updated database minor version to 11.
* Added backup functionality to userdata. #3
* Added sim paused and replay flags in sim data.
* Weather report now corrects any future dates back to last valid date.
* Fixed issues with file or directory exclusion for X-Plane scenery loader.
* Fixed problem where CIFP files with wrong case were not recognized correctly.
* Added userdata manager.
* Added CSV reader. Fixed several issues in Sql to CSV export class. Fixed issues in export
  functions of userdata manager. Removed import_timestamp from userdata table. #3
* Fixed coordinate recognition methods to allow degree/minute/second signs or not.
* Added functions to adjust ident and region values from user defined data.
* Userpoint CSV import is now trimmed to avoid fields containing only spaces.
  #3
* More work on user waypoint database. Added coordinate string parsing method that can deal with
  10+ formats. #3
* Fixed wrong header indication `A` for X-Plane flight plans. Fixed app version read in a wrong way
  for FSX/P3D plans.
* Added schema SQL script for user waypoint management. Added user data manager class including
  import and export functions for CSV, X-Plane user_fix.dat, Garmin GTN user waypoints and BGL XML.
  #3
* Fixed old problem where on-ground indication is unreliable for first packets from X-Plane.
* Translation problems fixed for log message.
* Fixed issue when loading fsbuild flight plans which are missing the altitude field.
* Now updating magnetic declination for VOR with calculated value where missing.
* Logging directory and addon excludes now in navdatabase options.
* Added is_3d to airport_medium and airport_large overview tables.
* Now reading FSX/P3D scenery entries pointing to `scenery` directory which is allowed in P3D.
  These were omitted previously. Reading Roaming/.../add-on.cfg and ProgramData/.../add-on.cfg now.
  #211
* Fixed issue with X-Plane airports that have wrong reference datum. Now falling back to center of
  bouding rect or center of a single runway.
* Fixed error on METAR stations improperly reporting CAVOK 9999. Mitigated problem with X-Plane
  METAR.rwx containing duplicate records. #212
* Custom Scenery/Global Airports/Earth nav data/earth_nav.dat is now read to get fixed ILS. Fixed
  reading of ILS for non consecutive entries in dat file. #209
* Corrected wrong runway heading from DFD compilation. #214
* SID and STAR common routes are now merged correctly into procedures for DFD and X-Plane compiler.
  #193
* Airport idents from DFD compilation are now all converted to original three-letter code if
  available. #203
* Added new columns runway_end.altitude, approach_leg.approach_fix_type and
  transition_leg.approach_fix_type. Updated database minor version to 9.
* Merge branch 'release/2.8'
* Now removing all unneeded dummy NDB and VOR waypoints that were created for airway generation.
  #201

Version 2.8.5

* Fixed errors when compiling the X-Plane database with PRDAT records in CIFP files since AIRAC 1801. #202
* Fixes for missing airway segments in DFD compiler.
* Fixed overly eager de-duplication of waypoints. #201
* Updated from Qt 5.9.1 to 5.9.3

Version 2.8.4

* Added Garmin GNS XML flight plan export.
* Added option to save GNS XML flightplans with user defined waypoints.
* Column `arinc_name` in table `approaches` is now filled for SID and STAR to get runway
  information for multiple or all. Needed for future fixes of #179.
* Added new columns `region` and `is_3d` (X-Plane) in airport table. Adapted all compilers to fill it.
* Database minor version bumped up to 8.
* Made flight plan format detection more tolerant for FMS 11 with missing cycle information.
* Fixed issues where X-Plane cannot load STAR in FMS 11 flight plans because runway reference is missing. #173
* Fixed problem where translations for second and third languages were loaded.
* Solved problem where translation files were loaded mixed in some cases.
* Fixed invalid Majestic Dash FPR flight plan file export on Windows and added error check for invalid file size.
* Fixed problem with wrong directory selection if default does not exist in dialog tools.
* Number of ALS is now correctly assigned to airports in X-Plane data compiler.
  This resulted in many airports having an ALS indication where none is.
* Logging library paths now for debugging.
* Updated French translation.

Version 2.8.3

* No changes except version.

2.8.2.beta

* DFD compiler now estimates if holding is given in time or distance for procedure legs.
* DFD compiler now always sets region for fixes where it was missing for procedure legs.
* Solved problem where fix was not set for DME distance and radial terminated procedure legs. Now copying recommended fix.

2.8.1.beta

* Fixed crash when getting simulator base path for unknown simulator type.
* Fixed help handler to use GUI language instead of system locale for links to help and legend.
* Updated French translation from Patrick.

2.8.0.beta

* Finished DFD to Little Navmap database compiler for Navigraph data. #126
* Added script table and option to store create index scripts in that table for preparation by the client. #126
* Added option to drop indexes after database creation to keep the file small.
* Vacuum and analyze option for database creation now defaults to true to get smaller and better organized files. #126
* Extended database metadata with optional compiler_version, valid_through and data source columns.
* Increased database minor version to 6.
* Added flight plan export option for Majestic Dash. #140
* Updated French translation files.
* Fixed error with wrong ILS pitch in X-Plane compiler.
* Disabling maximum airway segment length now for data sources that contain a valid airspace geometry
  (X-Plane and DFD - FSX/P3D contain invalid segments).
* Fixed several problems with bounding box and overlap calculations around the anti meridian.
* Better handling of X-Plane OpenAirspace comments and fixed problem where airspace names contain a comment character.
* FSX/P3D: Added workaround for scenery sort order with add-on.xml files missing layer id.
  Now forcing navaid updates to end of all scenery entries.

Version 2.6.8

* Adapted weather parser for language translation.
* Fixed exception when running into new TACAN approach in P3D version 4.1.
* Now populating channel in VORTACs.
* Fixed flight plan GPX export to save procedure points and altitude now.
* Added new aviation acronyms to capitalization function.
* Fixed error when loading FMS flight plans with invalid altitude values resulted in missing
  flight plan line in elevation profile.

Version 2.6.7

* Added codec recognition for X-Plane airspace files if BOM is available. Otherwise falls back to ANSI (Windows-1252).
* SqlUtil row copy is now more error tolerant and can deal with different row ordering.
* Added boundary query to database metadata.


Version 2.6.6.beta

* Added OpenAir airspace format compilation for X-PLane - also reading
  from $HOME/Documents/Little Navmap/X-Plane Airspaces
* Increased database minor version to 3.
* Added support for X-Plane 11 FMS files.
* Enabled user defined waypoint names for X-Plane FMS format.
* Fixed user waypoint format for FLP so that it can be reloaded.
* Fixed problem loading FS9 flight plans.
* Added optional arinc_name to approach procedure table.
* Added AIRAC cycle to metadata and comment to file table.
* X-Plane 3D airport state now considered when calculating rating.
* Fixed confusing 0 error dialog appearing after loading X-Plane database successfully.
* Now checking CIFP filenames before loading.
* Better error handling and reporting of too old files with version < 850.
* Added handler for assertions/crashes showing dialog to avoid crash to desktop.
* Small fixes to changelog formatting in update dialog.
* Made loading of add-on.xml more robust for files with wrong encoding.

Version 2.6.5

* Added workaround for P3D v4 add-on.xml files with inconsistent encoding (BOM / XML PI mismatch)
* Added error reporting and boundary check when reading X-Plane dat files to avoid crash to desktop.
* Added error collection for X-Plane compiler. Now only stops reading the current file on error.

Version 2.6.4
* Fixed crashes when reading X-Plane CIFP files with unknown approach type.
* Fixed crash with older apt.dat files where runway name for VASI is missing.
* Added support for all altitude restriction types.
* Warnings now print full filename including path.
* Fixed error where altitude restrictions were not recognized when given as flight levels.
* Enabled support for older apt.dat files with version down to 850.

Version 2.6.3
* Fixed error that caused a few hundred waypoints having invalid declination for X-Plane and FSX/P3D.
* Updated database minor version to 1 to indicate above change.

Version 2.6.2 (not public)

* Added compatibility flag for Mac OS X 10.8.
* New flight plan metadata for used simulator database.
* Better error handling in X-Plane compiler. Now checking for required files.
* Corrected mapping for runway markings in X-Plane compilation.

Version 2.6.1.beta

* Changed FS database schema for one-way airways and maximum altitude.
* Adapted airway compilation for direction and maximum altitude.
* Fixed error where number of attached airways was not assigned to waypoints.
* Increased database version - needs a reload.
* Now erasing wrong airway entries at departure and destination in flight plan.
* Fixed error where Documents path was not selected as default if missing simulator.

Version 2.6.0.beta

* Enabled database file exclusions and add-on override options to X-Plane loader.
* Fixed crash when reading X-Plane add-on airports (KLAS).
* Better error reporting when reading X-Plane scenery including file and line number.
* X-Plane file codec is now set to UTF-8 to avoid problems with special characters.
* Added detection of closed airports by name for X-Plane.
* Improved detection of military airports in general and name capitalization for X-Plane.

Version 2.5.4.develop

* Made all dialogs now application modal to avoid hiding behind main window.
* Removed unneede schema generation in case of aborted compilation.
* Fixed compilation not detecting abort/cancel condition for X-Plane.
* Added tolerant distance match when merging TACAN and VOR to VORTAC.
* BGL record length now checked to avoid endless loops and program freezing.
* Added console application to avoid widget dependencies.
* Added aircraft type codes.
* Fixed crash when reading CIFP files.

Version 2.5.3.develop

* Added support for full X-Plane scenery database except airspaces and ARINC files.
* Multiple X-Plane related schema extensions. Speed limit, apron.geometry and runway.shoulder and more. New columns are optional.
* Fixed wrongly placed speed limit columns in procedure tables.

* Added reading of X-Plane metar files.

* Can now load FMS, FLP and FS9 ini-style pln flight plan formats.
* Added automatic format detection while loading flight plans in P3D/FSX/FS9 PLN, X-Plane FMS and FLP.
* Added saving and loading of procedures to FLP format.

* magdec.bgl file is read from simulator scenery or included file.
* Magnetic declination for airports, waypoints and user defined points is now read from magdec.bgl.

* Made database loading more robust for mixed case paths on case sensitive operating systems.
* Databases can now be opened read-only.

* Added fix for unnamed scenery entries in add-on.xml files.
* Fixed reading of add-on.xml in UTF-16 encoding.
* Now sorting of add-on packages by layer.
* Added option to disable/enable reading and writing of add-on packages for P3D v3 and v4.

* Updated to Qt 5.9.1

Version 2.5.2.develop

* Fixed missing encoding in PLN XML files since changing to Qt 5.9.
* Now generating scenery names if missing from add-on.xml files.

Version 2.5.1.develop

* Fixed excessive logging of warnings in invalid airport records and waypoints.
* Now skipping airports where the first record is already invalid.
* Fixed problem with unnamed scenery areas from add-on.xml files.

Version 2.4.4

* v4 runways, aprons and taxiways are now read correctly. This affects all BGL files that are created using the v4 SDK compiler.
* Fixed crash with P3D v4 BGL files.
* Added support for P3D v4 add-on.xml packages. #111
* SimConnect is now loaded dynamically. #110

Version 2.4.3

* No changes.

Version 2.4.2.beta

* Added support for P3D version 4.
* Fixed METAR parsing for reports with missing humidity.

Version 2.4.1.beta

* Removed VOR and TACAN from radionav flight plan calculation tables to fix inclusion if TACAN in VOR/NDB navigation.
* Database minor version set to 1.


Version 2.4.0.beta
* Removed analyze in database scripts since it can degrade performance.

Version 2.3.7.develop
* Fixed crash on database version detection after adding has_sid_star column.

Version 2.3.6.develop

* GLOBE data reader now opens files on demand.
* Added SID/STAR indicator to database metadata.
* Added ship traffic to simconnect interface.
* Added GPX and X-Plane FMS export formats to flight plan.
* Added options to disable transfer of AI vehicles.
* Fix for too many reconnects flooding log on simulator crash.
* Added option to read also inactive scenery entries.

Version 2.3.5.develop

* Removed boundary_line table and pre-calculate boundary geometry now which ist stored as binary data.
* Bumped database version up for changed schema.
* Added support for GLOBE offline elevation data.
* Changed ILS to runway assignment logic to fix ILS data updates.
* Added still unused columns in database for speed limit, airway direction and other extensions for future AIRAC support.
* Added option for two external databases besides the real simulators.

Version 2.3.4.devel

* Several fixes when reading airspace boundaries.
* Added missing indexes to boundary table.
* Now collecting errors for missing scenery directories when loading scenery library database.

Version 2.3.3.devel

* Fixed old problem with empty registry entries when detecting simulator
* Fixed reading of airspace boundaries and removed hack.
* Reduced size of airspace enums in database.

Version 2.3.2.devel

* Added Aerosoft Airbus FLP flight plan export
* Solved problem where airports without delete record lost approaches.
* Fixed METAR parser errors with NOSIG token for weather or sky condition.
* Cleanup in database around transitions and approaches:
** Navaid ids have to be resolved during runtime now and not during compilation time.
** Fix for multiple navaids with the same name and same region in the database.
** Added more redundant information to runway end table to speed up program during runtime.
* Now nearest VOR and NDBs are assigned to waypoint if duplicates exist.

Version 2.3.1.devel

* Enhancement in geo namespace. Added line string class.
* Improvements to gui classes and added
* Better recognition of military airports for not capitalized designators.
* Fixed problem with METAR code CCA.
* Optimizations to route edge writer.
* Fixed old problem with reversed runway end coordinates.
* Added save and restore for QTableWidget, QTreeView and QTreeView.
* Work for approaches, transitions, SID and STARs.
* Added RTE export to flight plan.

Version 2.2.4

* Waypoint id length is now limited to 10 for flightplans.
* Fixed wrong (negated) UTC offset in SimConnect user aircraft.

Version 2.2.3

* Terminal waypoints are not deleted anymore for add-on airports.
* Removing invalid waypoints.
* Jetway indication for gates is correct now.
* Updated database minor version to 1.
* Html entities are replaced with quotes now in flightplan to ensure better third party compatibility.

Version 2.2.2.beta

* Added airport deduplication and optimizations to airport delete processor.
* Increased distance for VOR and NDB deduplication.
* Printing duplicated airports into log before deleting.
* Now appending scenery path and bgl filenames in airport table.
* Added result set printing to sql script.
* Added number of starts to airport for proper delete handling.
* Added table airport_file to collect all sceneries containing an airport.
* Added compiler option for deduplication.
* ILS of add-on airports are not deleted anymore. Optmized copying of add-on airport values.
* Added deletion of duplicate ILS.
* Optimizations for database: removed unused indexes.

Version 2.2.1.beta (not public)

* Fixed problem of wrong elevation adjustments overwriting add-on airport.
* BGL files are now read ordered by name to get more determinstic behavior.
* Only line comments are allowed now in ini files and scenery.cfg to avoid problems with
  filenames containing `#`. Behavior is now equal to flight simulator.

Version 2.2.0.beta

* Navaids with invalid coordinates are now filtered out by BGL reader.
* Queries for deleting duplicates now work properly also considering distance.
* Added more indexes.
* Duplicate airways are now removed before writing them to the database.
* Reduced logging.
* Fixes to approach and ils handling in delete record.
* Fixed old error that caused fragmented airways.
* Fixed loading problems for FSAD data.
* Added support for online help in HelpHandler.
* Added METAR parser.
* Support for AI and weather requests added in SimConnect data.
* Major cleanup and fixes in SimConnect code.
* SimConnect can now be compiled as a dummy.
* Fixed error on too small BGL files. (#51)

Version 2.0.5 - Stable Release

* Fixed scenery loading error for airports without city names.
* Improvement to error handling dialogs to allow instant access to contact and log file.
* Scenery.cfg reading is now more error tolerant, only prints warnings and ignores invalid entries.
* Fixed exclude and include directives for scenery not working for relative paths containing `..`.
* Added static methods and support for fragments to help handler to allow direct linking to anchors.

Version 2.0.4.beta

* Fixed multiple BGL reading errors:
** Now stopping BGL reading early if magic number or header size do not match.
** Skipping all BGL files with wrong magic number and wrong header size now.
* Fixed problem with wrongly assigned surface id 3 (CEMENT) in BGL files.
* Scenery reading now collects errors/exceptions instead of stopping at the first error.
* Added number of collected errors/exceptions to progress report when reading scenery.
* Made scenery.cfg reading more error tolerant to avoid problems with Scenery Config Editor.
* Fixed scenery.cfg path detection to use Windows environment variables. Now more reliable and also working on Windows XP.
* Fixed problem that could cause scenery areas to be omitted when section name is upper or mixed case.
* Fixed error when loading PFPX flight plans PLN files with missing + or - prefix in altitude.

Version 2.0.3.beta
* Removed not null constaints on type, ident and name columns since some add-ons leave fields empty.
* Updated schema to keep runway names in start position even if no assignment to runway was found.
* Schema version updated to major 4 - needs a reload.
* Increased width of ident columns for add-on sceneries.
* Database minor updated to 4.
* Fixed non working scenery exclusion when scenery folder is selected.
* Using native paths in file history handler now.
* Increased default file history size to 20 files.

Version 2.0.2.beta
* All BGL files are now read (invalid magic number of BGL files is now ignored).
* Added support for older add-on sceneries (needs reading of FS9 record structures for airport and parking).
* Airport reading will now stop if the first record is invalid.
* Fixed crash with `database locked` exception during ILS update.
* Corrected facility deletion for multiple airports.
* Airports without name and facilities are now omitted.
* Added more details to logging during scenery loading.

Version 2.0.1.beta
* Made scenery loading more robust for invalid values in BGL files.
* Bumped database version up to 3.3

Version 2.0.0.beta

First beta for 2.0 (Little Navmap/connect 1.0)

Version 1.9.9.develop

* BGL Reading and writing finalized
* Much more functionality added to classes in atools::geo namespace
* Added flight simulator PLN reader and writer in atools::fs::pln namespace
* Added simcommect data classes
* atools::gui namespace: Added WidgetState, WidgetTools, Application with error handler and much more
* Added atools::util namespace: Heap, HtmlBuilder and more.
* Added a copy of unsupported ZIP class from Qt.

Version 1.6.0.develop

* Added BGL reading and writing to a relational database.

Version 1.5.0

* Added FsPaths class - Flight simulator installation directory and files directory are now automatically detected
  for all simulators.
* Added filter that removes incomplete logbook entries on loading.
* Fixed error handling on wrong or not accessible logbook.bin files.
* Current database information is now kept if opening a file fails (added proper transaction handling).
* Locale specific fixes to number format, etc.

Version 1.0.0
* Initial release for Little Logbook 1.0.2
